# ===========================================================================
# GMM-CT  â€“  Reconstruction Configuration
# ===========================================================================
# Run the 4-stage GMM reconstruction on observed projection data.
#
# Usage:
#   gmm-ct reconstruct --config configs/reconstruct.yaml
#   gmm-ct reconstruct --config configs/reconstruct.yaml --device cuda
# ===========================================================================

# --- Input Data -----------------------------------------------------------
data:
  # projections: data/simulated/projections.pt   # Path to projection data file (.pt or .npy)
  projections: data/simulated/20260218_174519_seed40_N2/projections.pt
  # For .pt files: expects dict with keys "projections" and "times"
  # For .npy files: expects a companion times.npy in the same directory

# --- Model ----------------------------------------------------------------
model:
  n_gaussians: 2                     # Number of Gaussian components to fit

# --- CT Geometry ----------------------------------------------------------
# Must match the geometry used to acquire the projection data.
geometry:
  sources:
    - [-1.0, -1.0]                   # Source position(s)

  receivers:
    n_receivers: 128                 # Number of detector elements
    x_coordinate: 4.0                # X-position of the detector line
    y_min: -3.0                      # Bottom of detector
    y_max: 1.0                       # Top of detector

# --- Known Physics --------------------------------------------------------
physics:
  initial_positions:
    - [1.0, 1.0]                     # Known initial position (broadcast to all Gaussians)

  accelerations:
    - [0.0, -9.81]                   # Known acceleration (broadcast to all Gaussians)

  omega_range: [-24.0, -16.0]       # Angular velocity search bounds [min, max] (Hz)

# --- Reconstruction Settings ---------------------------------------------
reconstruction:
  n_trajectory_trials: null          # Multi-start trials for trajectory opt (null = auto)
  n_omega_inits: null                # Random omega starts for joint opt (null = auto)
  max_iterations: 500                # Maximum L-BFGS iterations
  tolerance: 1.0e-5                  # Convergence tolerance

# --- Output ---------------------------------------------------------------
output:
  directory: results/                # Where to save estimated parameters
  save_plots: true                   # Save diagnostic plots
  save_animations: true              # Save animations
  verbose: false

# --- Device (optional) ----------------------------------------------------
# device: cuda                       # Uncomment to force GPU
